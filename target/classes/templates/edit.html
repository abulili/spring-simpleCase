<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css">
    <style>
        h2 {
            text-align: center;
        }
        div {
            text-align: center;
            font-size: 80px;
        }
    </style>
</head>
<body>
<h2>员工编辑页面</h2>
    <form th:each="employees:${Employee}" id="edit1" >
        <label id="employeeId11">工号</label><p id="employeeId1">[[${employees.employeeId}]]</p>
    </form>

    <form id="edit2">
        <label id="employeeId22" style="display:none">工号</label><input type="text"  id="employeeId2" style="display:none">
        <label>姓名</label><input type="text"  id="employeeName2">
        <label>性别</label><input id="man" type="radio" checked="checked" name="sex" value="man"/>男 <input type="radio" id="woman" name="sex" value="women">女<br>
        <label>年龄</label><input type="text"  id="age2">
        <label>基础工资</label><input type="text" id="baseSalary2">
        <label>地点号</label><input type="text"  id="locationId2">
        <div><button type="button" onclick="add()">Save</button></div>
    </form>
<script>
    window.onload = function(){
        if(!document.getElementById("edit1")) {
             document.getElementById("employeeId22").style.display = "block";
             document.getElementById("employeeId2").style.display = "block";
             document.getElementById("employeeId11").style.display = "none";
        }
        else {
            document.getElementById("employeeId22").style.display = "none";
        }
    }
    async function add(){
        var employeeId2;
        if(!document.getElementById("edit1"))
            employeeId2 = document.getElementById("employeeId2").value;
        else employeeId2 = document.getElementById("employeeId1").innerHTML;

        var employeeName2 = document.getElementById("employeeName2").value;

        var gender2;
        const form = document.getElementById("edit2");
        const gender = form.elements["sex"].value;
        if(gender === "man") {
            gender2 = "男";
        }
        else gender2 = "女";

        var age2 = document.getElementById("age2").value;
        var baseSalary2 = document.getElementById("baseSalary2").value;
        var locationId2 = document.getElementById("locationId2").value;
        if(employeeId2 != "" && employeeName2 != "") {
            url = "http://localhost:8080/API/work1/edit/addEmployee" + "/" + employeeId2 + "/" + employeeName2 + "/" + gender2 + "/" + age2 + "/" + baseSalary2 + "/" + locationId2;
            await fetch(url);
            window.location="[[@{/API/work1/Manage}]]";
<!--            alert("??");-->
        }
        else {
            alert("不能为空！");
        }
    }
</script>
</body>
</html>